using UnityEngine;
using System.Collections;
using System.Collections.Generic;
using UnityEngine.UI;

public class SnakeMovement : MonoBehaviour
{
	[HideInInspector]
    public float Speed;
	
	[HideInInspector]
	public float RotationSpeed;
	public List<GameObject> BodyObjects = new List<GameObject>();
	
	[HideInInspector]
	public float z_offset = 0f;
	public GameObject BodyPrefab;
	public Text ScoreText;
	public int score = 0;
	
	[HideInInspector]
	public bool isGameOver;
	
    void Start()
    {
		BodyObjects.Add(gameObject);
		Speed =  5.0f;
		RotationSpeed = 150.0f;
		isGameOver = false;
    }

    void Update()
    {
		ScoreText.text = "Score: " + score;
		
		if(!isGameOver) {
			
			transform.Translate(Vector3.forward*Speed*Time.deltaTime);
		
		if(Input.GetKey(KeyCode.D) || Input.GetKey(KeyCode.RightArrow))
		{
			transform.Rotate(Vector3.up*RotationSpeed*Time.deltaTime);
		}
		
		if(Input.GetKey(KeyCode.A) || Input.GetKey(KeyCode.LeftArrow))
		{
			transform.Rotate(Vector3.up*-1*RotationSpeed*Time.deltaTime);
		}
		}
		
    }
	
	public void AddBody()
	{
		score++;
		Vector3 newBodyPos = BodyObjects[BodyObjects.Count-1].transform.position;
		newBodyPos.z -= z_offset;
		BodyObjects.Add(GameObject.Instantiate(BodyPrefab,newBodyPos,Quaternion.identity) as GameObject);
	}
}
